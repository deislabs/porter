# This is the configuration for Porter
# You must define steps for each action, but the rest is optional
# Uncomment out the sections below to take full advantage of what Porter can do!

mixins:
  - exec
  - helm

dependencies:
  - name: mysql
    parameters:
      database-name: wordpress
    connections:
      - source: bundle.dependencies.mysql.outputs.host
        destination: bundle.credentials.dbhost

name: HELLO
version: 0.1.0
invocationImage: porter-hello:latest

credentials:
  - name: kubeconfig
    path: /root/.kube/config

install:
  - description: "Say Hello World"
    exec:
      command: bash
      arguments:
      - -c
      - echo Hello World
  - description: "Install MySQL with Helm"
    helm:
      name: porter-ci-mysql
      chart: stable/mysql
      version: 0.10.2
      replace: true
      set:
      mysqlDatabase: hellodb

uninstall:
  - description: "Uninstall Hello World"
    exec:
      command: bash
      arguments:
      - -c
      - echo Goodbye World
